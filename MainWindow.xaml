<Window x:Class="ConfigurationManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ConfigurationManager"
        mc:Ignorable="d"
        Title="Configuration Manager" Height="600" Width="900"
        Background="#2b2b2b">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Connection Settings -->
        <Border Grid.Row="0" Background="#3c3c3c" Padding="10" CornerRadius="5" Margin="0,0,0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Connection String:" 
                          VerticalAlignment="Center" Margin="0,0,10,0"
                          Foreground="White"/>
                
                <TextBox x:Name="ConnectionStringTextBox" Grid.Column="1" 
                        Padding="5" Background="#555" Foreground="White"
                        BorderBrush="#666" VerticalAlignment="Center"
                        Text="Host=localhost;Database=yourdb;Username=youruser;Password=yourpass"/>
                
                <Button x:Name="ConnectButton" Grid.Column="2" Content="Connect" 
                       Click="ConnectButton_Click" Margin="10,0,0,0" Padding="15,5"
                       Background="#0078d4" Foreground="White" BorderThickness="0"
                       Cursor="Hand"/>
            </Grid>
        </Border>

        <!-- Title and Refresh Button -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock Grid.Column="0" Text="Configurations" FontSize="20" FontWeight="Bold" 
                      Foreground="White" VerticalAlignment="Center"/>
            
            <Button x:Name="RefreshButton" Grid.Column="1" Content="🔄 Refresh" 
                   Click="RefreshButton_Click" Padding="15,5"
                   Background="#555" Foreground="White" BorderThickness="0"
                   Cursor="Hand" IsEnabled="False"/>
        </Grid>

        <!-- Configurations List -->
        <Border Grid.Row="2" Background="#3c3c3c" CornerRadius="5" Margin="0,0,0,10">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ListBox x:Name="ConfigurationsListBox" Background="Transparent" 
                        BorderThickness="0" Padding="5">
                      <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#4c4c4c" Margin="5" Padding="10" CornerRadius="3">
                                <StackPanel>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock Grid.Column="0" FontWeight="Bold" FontSize="14" Foreground="White">
                                            <Run Text="ID: "/><Run Text="{Binding Id}"/>
                                        </TextBlock>
                                        
                                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                                            <Button Content="✏️ Edit" Click="EditButton_Click" 
                                                   Margin="5,0,5,0" Padding="10,5"
                                                   Background="#28a745" Foreground="White" BorderThickness="0"
                                                   Cursor="Hand" Tag="{Binding}"/>
                                            <Button Content="🗑️ Delete" Click="DeleteButton_Click"
                                                   Margin="5,0,0,0" Padding="10,5"
                                                   Background="#dc3545" Foreground="White" BorderThickness="0"
                                                   Cursor="Hand" Tag="{Binding}"/>
                                        </StackPanel>
                                    </Grid>
                                    <TextBlock Foreground="#ddd" Margin="0,5,0,0">
                                        <Run Text="Project: " FontWeight="SemiBold"/><Run Text="{Binding Project}"/>
                                    </TextBlock>
                                    <TextBlock Foreground="#ddd" Margin="0,2,0,0">
                                        <Run Text="URL: " FontWeight="SemiBold"/><Run Text="{Binding Url}"/>
                                    </TextBlock>
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock Grid.Column="0" Text="Config:" FontWeight="SemiBold" Foreground="#ddd" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                        
                                        <Button Grid.Column="2" Content="📋 Copy" Click="CopyConfigButton_Click" 
                                               Margin="5,0,0,0" Padding="10,5"
                                               Background="#555" Foreground="White" BorderThickness="0"
                                               Cursor="Hand" Tag="{Binding}"/>
                                    </Grid>
                                    <TextBox Text="{Binding ConfigDisplay, Mode=OneWay}" 
                                            IsReadOnly="True"
                                            TextWrapping="Wrap" 
                                            Background="#555" 
                                            Foreground="#aaa"
                                            BorderThickness="0"
                                            Padding="5"
                                            MaxHeight="150"
                                            VerticalScrollBarVisibility="Auto"
                                            IsReadOnlyCaretVisible="True" />
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </ScrollViewer>
        </Border>

        <!-- Add New Configuration Panel -->
        <Border Grid.Row="3" Background="#3c3c3c" Padding="15" CornerRadius="5">
            <Expander Header="➕ Add New Configuration" Foreground="White" 
                     x:Name="AddConfigExpander" IsEnabled="False">
                <Grid Margin="0,10,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Project Name -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Project:" 
                              VerticalAlignment="Center" Foreground="White" Margin="0,0,10,0"/>
                    <TextBox x:Name="ProjectNameTextBox" Grid.Row="0" Grid.Column="1" 
                            Padding="5" Background="#555" Foreground="White" BorderBrush="#666"
                            Margin="0,0,0,10"/>

                    <!-- URL -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="URL:" 
                              VerticalAlignment="Center" Foreground="White" Margin="0,0,10,0"/>
                    <TextBox x:Name="UrlTextBox" Grid.Row="1" Grid.Column="1" 
                            Padding="5" Background="#555" Foreground="White" BorderBrush="#666"
                            Margin="0,0,0,10"/>

                    <!-- Config JSON -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Config JSON:" 
                              VerticalAlignment="Top" Foreground="White" Margin="0,5,10,0"/>
                    <TextBox x:Name="ConfigJsonTextBox" Grid.Row="2" Grid.Column="1" 
                            Padding="5" Background="#555" Foreground="White" BorderBrush="#666"
                            Height="100" TextWrapping="Wrap" AcceptsReturn="True"
                            VerticalScrollBarVisibility="Auto"
                            Margin="0,0,0,10"/>

                    <!-- Add Button -->
                    <Button x:Name="AddButton" Grid.Row="3" Grid.Column="1" Content="Add Configuration" 
                           Click="AddButton_Click" Padding="15,8" HorizontalAlignment="Right"
                           Background="#0078d4" Foreground="White" BorderThickness="0"
                           Cursor="Hand" FontWeight="SemiBold"/>
                </Grid>
            </Expander>
        </Border>
    </Grid>
</Window>
